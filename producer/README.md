# Kafka Order Producer - Эмулятор заказов

Скрипт-эмулятор для отправки тестовых заказов в Kafka.

## Возможности

-  Генерация случайных реалистичных заказов
-  Настраиваемые параметры (количество, задержка, брокер)
-  Логирование процесса отправки
-  Валидные данные, соответствующие модели Order

## Запуск

```bash
go run kafka_producer.go -count=10 -delay=1s
```

## Параметры

- `-broker` - Адрес Kafka брокера (по умолчанию: localhost:9093)
- `-topic` - Kafka топик (по умолчанию: orders)
- `-count` - Количество сообщений для отправки (по умолчанию: 1)
- `-delay` - Задержка между сообщениями (по умолчанию: 1s)

## Примеры использования

### Отправить 5 заказов с задержкой 2 секунды
```bash
go run kafka_producer.go -count=5 -delay=2s
```

### Отправить 10 заказов без задержки
```bash
go run kafka_producer.go -count=10 -delay=0s
```

### Подключение к удаленному брокеру
```bash
go run kafka_producer.go -broker=remote-kafka:9092 -count=3
```


## Структура генерируемых данных

Скрипт генерирует заказы со следующими характеристиками:

- **OrderUID**: Уникальные идентификаторы формата `order_{num}_{timestamp}`
- **TrackNumber**: Номера отслеживания формата `TRACK{6-значный номер}`
- **Delivery**: Случайные российские города, имена, адреса
- **Payment**: Реалистичные суммы и банковские данные
- **Items**: 1-3 случайных товара с ценами и скидками
- **Dates**: Актуальные даты создания

## Требования

- Go 1.24.2+
- Запущенный Kafka брокер
- Доступ к топику `orders`

## Установка зависимостей

```bash
cd producer
go mod download
```

## Мониторинг

После отправки заказов вы можете:

1. **Проверить логи сервиса**:
   ```bash
   docker-compose logs -f app
   ```

2. **Открыть веб-интерфейс**: http://localhost:8080/

3. **Использовать Kafka UI**: http://localhost:8081/

## Пример сгенерированного заказа

```json
{
  "order_uid": "order_1_1692364830",
  "track_number": "TRACK123456",
  "entry": "WBIL",
  "delivery": {
    "name": "Иван Иванов",
    "phone": "+71234567890",
    "zip": "125493",
    "city": "Москва",
    "address": "ул. Ленина, д. 42",
    "region": "Москва область",
    "email": "user123@example.com"
  },
  "payment": {
    "transaction": "txn_1692364830123",
    "currency": "RUB",
    "provider": "alfabank",
    "amount": 2500,
    "bank": "alfa",
    "delivery_cost": 350,
    "goods_total": 2150
  },
  "items": [
    {
      "name": "Футболка",
      "price": 1200,
      "size": "M",
      "brand": "Nike",
      "sale": 15,
      "total_price": 1020
    }
  ]
}
```
